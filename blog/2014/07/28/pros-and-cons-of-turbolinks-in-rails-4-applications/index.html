
<!DOCTYPE HTML>
<html>
<head>
	<script data-cfasync="false" type="text/javascript" src="//use.typekit.net/axj3cfp.js"></script>
	<script data-cfasync="false" type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<meta charset="utf-8">
	<title>Pros and Cons of Turbolinks in Rails 4 Applications  | Eternal White Belt</title>

<meta name="author" content="Will Lowry"> 

<meta name="description" content="Flatiron School, Developer, Ruby, Rails"> <meta name="keywords" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Eternal White Belt" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="/javascripts/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script>

	
</head>



<body>
	<header id="header" class="inner"><h1><a href="/">Eternal White Belt</a></h1>
<h4>Learning to Code.</h4>
<nav id="main-nav"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/portfolio">Portfolio</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/">Blog</a></li>
	<li><a href="/about">About</a></li>
	<li><a href="/portfolio">Portfolio</a></li>
	<li><a href="/archives">Archive</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:wlowry88.github.io">
			</form>
		</div>
	</div>
</nav>


</header>

	<div id="content" class="inner"><article class="post">
	<h2 class="title">Pros and Cons of Turbolinks in Rails 4 Applications</h2>
	<div class="entry-content"><h3>Inspiration</h3>

<p>Recently, I was playing around with jQuery and AJAX since we&rsquo;d been learning about how to use event listeners and asynchronous Javascript requests. I made a blogging app that can add and edit posts and comments on those posts using AJAX. Additionally, I tried to add in a few event listeners using jQuery, such as using a slideToggle function on showing the full text of a post or the add comment form.</p>

<p>Everything was going great; refreshing the posts index page yielded all my nice front-end effects. Until I tried linking to it.</p>

<p>THEN EVERYTHING BROKE.</p>

<!--More-->


<h3>What are turbolinks?</h3>

<p>If you don&rsquo;t know what they do, it&rsquo;s not that complex. Basically, turbolinks will capture all links that look like they go to HTML pages (links using restful routes are prime candidates), makes an AJAX request for the content, and then replaces the body with the response&rsquo;s body. It has the potential to speed up your app a little bit. Steve Klabnik wrote a <a href="http://blog.steveklabnik.com/posts/2012-09-27-seriously--numbers--use-them-">post</a> about testing speed differences. The difference can be measurable &ndash; using Basecamp Next&rsquo;s CSS and JS files, turbolinks were able to decrease testing time by about 11 seconds. Not bad.</p>

<h3>The Problems</h3>

<p>The first problem is that Turbolinks do not call documentâ€™s ready event. Say you wanted to use Javascript&rsquo;s alert function on a page, or if you wanted to hide an element as soon as the page is loaded (perhaps to be shown later).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;You&#39;re seeing me if this page was directly loaded&quot;</span><span class="p">);</span>
</span><span class='line'><span class="c1">// a popup window</span>
</span><span class='line'><span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#thing-we-wanted-hidden&quot;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
</span><span class='line'><span class="c1">// won&#39;t work on a link.</span>
</span></code></pre></td></tr></table></div></figure>


<p>The code above will only work when the page is refreshed directly. Unfortunately, when a page is accessed via a link in Rails 4, the turbolinks gem doesn&rsquo;t fetch it. Note, there is a workaround for this particular issue (jquery-turbolinks) but it&rsquo;s still a little annoying. And it doesn&rsquo;t address another issue.</p>

<p>Turbolinks can speed things up a little because it doesn&rsquo;t need to reload your assets. But it&rsquo;s more than just the assets that are saved. The entire global scope is saved. Yehuda Katz has said that &ldquo;a lot of existing JavaScript operates under the assumption of a clean scope, and a single DOMContentLoaded event,&rdquo; and I tend to agree after my experience thus far. While it&rsquo;s possible to add workarounds (for example, I would re-apply most of my page-load jQuery effects in my Ajax-returned javascript), we&rsquo;re doing pretty simple jQuery so far and I can only assume that complications will increase when using more advanced third-party Javascript.</p>

<h3>Ok, so how do you I rid of turbolinks in my app?</h3>

<p>To remove turbolinks from your Rails 4 Application, you should follow 3 simple steps:</p>

<ol>
<li><p>Delete the line <code>turbolinks</code> in your Gemfile to remove the turbolinks gem.</p></li>
<li><p>Delete the line <code>//= require turbolinks</code> in your app/assets/javascripts/application.js file to stop the asset pipeline from trying to require turbolinks.</p></li>
<li><p>Delete both lines <code>data-turbolinks-track =&gt; true</code> key/value pairs in your app/views/layouts/application.html.erb file to stop including a now-invalid hash option.</p></li>
</ol>


<h3>Conclusion</h3>

<p>If you&rsquo;re trying to include a good amount of Javascript, jQuery <a href="https://github.com/kossnocorp/jquery.turbolinks">Turbolinks</a> seem to be more trouble than they&rsquo;re worth.</p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-07-28T22:02:31-04:00" pubdate data-updated="true">Jul 28<sup>th</sup>, 2014</time></div>
	


	
</div></article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
<!---	<a class="addthis_counter addthis_pill_style"></a> --->
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>


</div>
	<footer id="footer" class="inner">Copyright &copy; 2014

    Will Lowry

<br>
Powered by Octopress.
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>
